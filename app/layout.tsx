import './globals.scss';
import { Orbitron } from 'next/font/google';
import { cookies } from 'next/headers';
import Image from 'next/image';
import Link from 'next/link';
import { getUserBySessionToken } from '../database/users';
import { LogoutButton } from './LogoutButton';

const orbitron = Orbitron({
  subsets: ['latin'],
  weight: '400',
});

export const metadata = {
  title: { default: 'Main Page', template: '%s | Gaming Galaxy  ' },
  description: 'Generated by create next app',
};

export default async function RootLayout({ children }: Props) {
  // 1. get the session token from the cookie
  const cookieStore = cookies();
  const sessionToken = cookieStore.get('sessionToken');

  const user = !sessionToken?.value
    ? undefined
    : await getUserBySessionToken(sessionToken.value);

  /*   return (
    <><html lang="en" className="bg-[#ACC8E5] text-[#142C47] box-border">
      <nav>
        <div className="flex justify-evenly my-8">
          <div className="site-logo">
            <Link href="/">LOGO Gaming forum LOGO</Link>
          </div>
          <div className="user-signin">
            <div>GameByte Community</div>
            <div>
              <LoginForm>Log In</LoginForm>
            </div>
            <div>
              <Link href="/register">Sign Up here!</Link>
            </div>
            <a>Profile</a>
          </div>
        </div>
      </>
      <body className={inter.className}>{children}</body>
    </nav><footer>
        <div className="flex justify-evenly my-20">
          <span>About Us</span>
          <span>Contacts</span>
        </div>
      </footer></>
    </html>
  ); */
  return (
    <html lang="en" className="bg-black box-border">
      <body>
        <nav>
          <div
            className={`${orbitron.className} pt-6 p-4 flexbox justify-center`}
          >
            <div className=" pl-10 flex justify-around items-center gap-48 ">
              <Link href="/">
                <Image
                  src="/images/logo-bk.png"
                  alt="Logo"
                  width={100}
                  height={100}
                />
              </Link>
              {/*   <Link href="/">LOGO Gaming Galaxy LOGO</Link> */}
              {user ? (
                <>
                  <div
                    className={`${orbitron.className}  pt-6 p-4 flexbox justify-center`}
                  >
                    <div className="w-72 h-16 text-white text-4xl">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="53"
                        height="49"
                        viewBox="0 0 53 49"
                        fill="none"
                      >
                        <path
                          d="M24.5346 46.9584C24.2786 46.9581 24.0245 46.9166 23.7838 46.8359C23.3195 46.6787 22.9257 46.382 22.6654 45.9933C22.4051 45.6046 22.2935 45.1464 22.3484 44.6921L24.0488 30.2167H11.0417C10.6405 30.2173 10.2468 30.1168 9.90268 29.926C9.55862 29.7353 9.27725 29.4615 9.08881 29.134C8.90037 28.8066 8.81198 28.4379 8.83312 28.0675C8.85425 27.6971 8.98413 27.339 9.2088 27.0317L26.6325 2.94004C26.9081 2.56302 27.312 2.28191 27.7801 2.14135C28.2482 2.00079 28.7537 2.00884 29.2163 2.1642C29.661 2.31684 30.0407 2.59782 30.2993 2.96554C30.5578 3.33325 30.6814 3.76816 30.6517 4.20587L28.9513 18.7834H41.9584C42.3596 18.7828 42.7533 18.8833 43.0974 19.0741C43.4415 19.2648 43.7228 19.5386 43.9113 19.8661C44.0997 20.1935 44.1881 20.5622 44.167 20.9326C44.1458 21.303 44.016 21.6611 43.7913 21.9684L26.3675 46.06C26.165 46.3371 25.8919 46.5639 25.5723 46.7206C25.2527 46.8772 24.8964 46.9589 24.5346 46.9584ZM15.1713 26.1334H26.5C26.8082 26.134 27.1128 26.1943 27.3942 26.3104C27.6757 26.4264 27.9277 26.5956 28.1342 26.8071C28.3426 27.0215 28.4995 27.2742 28.5947 27.5487C28.6899 27.8232 28.7211 28.1132 28.6863 28.3996L27.6925 36.8725L37.8288 22.8667H26.5C26.1884 22.8685 25.8799 22.8092 25.5948 22.6929C25.3097 22.5765 25.0545 22.4057 24.8459 22.1916C24.6373 21.9776 24.4801 21.7251 24.3846 21.4509C24.2891 21.1766 24.2574 20.8868 24.2917 20.6005L25.2855 12.1275L15.1713 26.1334Z"
                          fill="#F9F871"
                        />
                      </svg>
                      <Link href={`/profile/${user.username}`}>
                        {user.username}
                      </Link>
                      {/*                       <AvatarPage username={user.username} />
                       */}
                    </div>
                  </div>
                  <div className="w-72 h-16 text-white text-4xl font-normal">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="68"
                      height="61"
                      viewBox="0 0 68 61"
                      fill="none"
                    >
                      <path
                        d="M59.1033 27.1195L44.6533 16.4191C43.7834 15.7938 42.7352 15.4003 41.6281 15.2835C40.521 15.1667 39.3996 15.3312 38.3917 15.7582C37.5157 16.1046 36.7693 16.6699 36.2418 17.3865C35.7142 18.1031 35.4278 18.9408 35.4167 19.7995V26.3824L21.9867 16.4191C21.1167 15.7938 20.0685 15.4003 18.9614 15.2835C17.8543 15.1667 16.7329 15.3312 15.725 15.7582C14.8755 16.1231 14.1585 16.6963 13.6571 17.4115C13.1557 18.1267 12.8903 18.9546 12.8917 19.7995V41.2003C12.8903 42.0452 13.1557 42.8732 13.6571 43.5884C14.1585 44.3036 14.8755 44.8768 15.725 45.2416C16.5349 45.572 17.4136 45.7452 18.3033 45.7499C19.6444 45.7514 20.9451 45.3385 21.9867 44.5808L35.4167 34.6174V41.2003C35.4278 42.059 35.7142 42.8967 36.2418 43.6134C36.7693 44.33 37.5157 44.8952 38.3917 45.2416C39.2016 45.572 40.0802 45.7452 40.97 45.7499C42.311 45.7514 43.6117 45.3385 44.6533 44.5808L59.1033 33.8803C59.67 33.4757 60.1276 32.9616 60.4421 32.3763C60.7566 31.791 60.92 31.1496 60.92 30.4999C60.92 29.8502 60.7566 29.2088 60.4421 28.6236C60.1276 28.0383 59.67 27.5242 59.1033 27.1195ZM18.4167 40.4378V20.3333L32.0733 30.4999L18.4167 40.4378ZM41.0833 40.4378V20.3333L54.74 30.4999L41.0833 40.4378Z"
                        fill="#FF007A"
                      />
                    </svg>
                    <LogoutButton />
                  </div>
                </>
              ) : (
                <>
                  <div>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="53"
                      height="49"
                      viewBox="0 0 53 49"
                      fill="none"
                    >
                      <path
                        d="M24.5346 46.9584C24.2786 46.9581 24.0245 46.9166 23.7838 46.8359C23.3195 46.6787 22.9257 46.382 22.6654 45.9933C22.4051 45.6046 22.2935 45.1464 22.3484 44.6921L24.0488 30.2167H11.0417C10.6405 30.2173 10.2468 30.1168 9.90268 29.926C9.55862 29.7353 9.27725 29.4615 9.08881 29.134C8.90037 28.8066 8.81198 28.4379 8.83312 28.0675C8.85425 27.6971 8.98413 27.339 9.2088 27.0317L26.6325 2.94004C26.9081 2.56302 27.312 2.28191 27.7801 2.14135C28.2482 2.00079 28.7537 2.00884 29.2163 2.1642C29.661 2.31684 30.0407 2.59782 30.2993 2.96554C30.5578 3.33325 30.6814 3.76816 30.6517 4.20587L28.9513 18.7834H41.9584C42.3596 18.7828 42.7533 18.8833 43.0974 19.0741C43.4415 19.2648 43.7228 19.5386 43.9113 19.8661C44.0997 20.1935 44.1881 20.5622 44.167 20.9326C44.1458 21.303 44.016 21.6611 43.7913 21.9684L26.3675 46.06C26.165 46.3371 25.8919 46.5639 25.5723 46.7206C25.2527 46.8772 24.8964 46.9589 24.5346 46.9584ZM15.1713 26.1334H26.5C26.8082 26.134 27.1128 26.1943 27.3942 26.3104C27.6757 26.4264 27.9277 26.5956 28.1342 26.8071C28.3426 27.0215 28.4995 27.2742 28.5947 27.5487C28.6899 27.8232 28.7211 28.1132 28.6863 28.3996L27.6925 36.8725L37.8288 22.8667H26.5C26.1884 22.8685 25.8799 22.8092 25.5948 22.6929C25.3097 22.5765 25.0545 22.4057 24.8459 22.1916C24.6373 21.9776 24.4801 21.7251 24.3846 21.4509C24.2891 21.1766 24.2574 20.8868 24.2917 20.6005L25.2855 12.1275L15.1713 26.1334Z"
                        fill="#F9F871"
                      />
                    </svg>
                    <div className="w-72 h-16 text-white text-4xl">
                      <Link href="/register">register</Link>
                    </div>
                  </div>
                  <div>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="68"
                      height="61"
                      viewBox="0 0 68 61"
                      fill="none"
                    >
                      <path
                        d="M59.1033 27.1195L44.6533 16.4191C43.7834 15.7938 42.7352 15.4003 41.6281 15.2835C40.521 15.1667 39.3996 15.3312 38.3917 15.7582C37.5157 16.1046 36.7693 16.6699 36.2418 17.3865C35.7142 18.1031 35.4278 18.9408 35.4167 19.7995V26.3824L21.9867 16.4191C21.1167 15.7938 20.0685 15.4003 18.9614 15.2835C17.8543 15.1667 16.7329 15.3312 15.725 15.7582C14.8755 16.1231 14.1585 16.6963 13.6571 17.4115C13.1557 18.1267 12.8903 18.9546 12.8917 19.7995V41.2003C12.8903 42.0452 13.1557 42.8732 13.6571 43.5884C14.1585 44.3036 14.8755 44.8768 15.725 45.2416C16.5349 45.572 17.4136 45.7452 18.3033 45.7499C19.6444 45.7514 20.9451 45.3385 21.9867 44.5808L35.4167 34.6174V41.2003C35.4278 42.059 35.7142 42.8967 36.2418 43.6134C36.7693 44.33 37.5157 44.8952 38.3917 45.2416C39.2016 45.572 40.0802 45.7452 40.97 45.7499C42.311 45.7514 43.6117 45.3385 44.6533 44.5808L59.1033 33.8803C59.67 33.4757 60.1276 32.9616 60.4421 32.3763C60.7566 31.791 60.92 31.1496 60.92 30.4999C60.92 29.8502 60.7566 29.2088 60.4421 28.6236C60.1276 28.0383 59.67 27.5242 59.1033 27.1195ZM18.4167 40.4378V20.3333L32.0733 30.4999L18.4167 40.4378ZM41.0833 40.4378V20.3333L54.74 30.4999L41.0833 40.4378Z"
                        fill="#FF007A"
                      />
                    </svg>
                    <div className=" w-72 h-16 text-white text-4xl ">
                      <Link href="/login">login</Link>
                    </div>
                  </div>
                </>
              )}
            </div>
          </div>
        </nav>
        {children}
      </body>
    </html>
  );
}
